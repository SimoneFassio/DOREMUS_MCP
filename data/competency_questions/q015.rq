# category: "Works and Expressions"
# split: "medium"
# origin: competency_question
# question: "Give me a list of melodies of 20th century"
# query:
SELECT DISTINCT ?expression, SAMPLE(?title) as ?title, ?start, ?end
WHERE {
  ?expression a efrbroo:F22_Self-Contained_Expression ;
          rdfs:label ?title ;
          mus:U12_has_genre <http://data.doremus.org/vocabulary/iaml/genre/mld> .

  ?expCreation efrbroo:R17_created ?expression ;
          ecrm:P4_has_time-span / time:hasEnd / time:inXSDDate ?end ;
          ecrm:P4_has_time-span / time:hasBeginning / time:inXSDDate ?start .

  FILTER ( ?start >= "1900"^^xsd:gYear AND ?end < "2000"^^xsd:gYear )
}

# workflow
build_query(question="Give me a list of melodies of 20th century", template="expression")
apply_filter(query_id=query_id, base_variable="expression", template="expression", filters={"genre": "melodie"})
filter_by_quantity(subject="expCreation", property="ecrm:P4_has_time-span", type="range", value="1900", valueEnd="2000", query_id=query_id)
execute_query(query_id=query_id)